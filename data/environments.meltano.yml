environments:
- name: prod
  config:
    plugins:
      extractors:
      - name: tap-google-analytics
        config:
          start_date: '2021-11-01'
      - name: tap-athena
        config:
          schema_name: ${DBT_OUTPUT_SCHEMA_NAME}
          s3_staging_dir: s3://prod-meltano-bucket-01/data/raw01/tap-athena/
          s3_bucket: prod-meltano-bucket-01
      loaders:
      - name: target-athena
        config:
          s3_bucket: prod-meltano-bucket-01
          athena_database: ${RAW_SCHEMA_NAME}
          s3_staging_dir: s3://prod-meltano-bucket-01/data/raw01/target-athena/
  env:
    DBT_OUTPUT_SCHEMA_NAME: dbt_prod
    ATHENA_CATALOG: awsdatacatalog
    DBT_TARGET: athena
    DBT_ATHENA_S3_STAGE: s3://prod-meltano-bucket-01/data/raw01/dbt/
    RAW_SCHEMA_NAME: prod01_raw
- name: userdev
  config:
    plugins:
      extractors:
      - name: tap-google-analytics
        config:
          start_date: '2021-11-01'
      - name: tap-athena
        config:
          schema_name: dbt_dev_${USER_PREFIX}
          s3_staging_dir: s3://devtest-meltano-bucket-01/data/raw01/tap-athena/
          s3_bucket: devtest-meltano-bucket-01
      loaders:
      - name: target-athena
        config:
          s3_bucket: devtest-meltano-bucket-01
          athena_database: dev01_${USER_PREFIX}_raw
          s3_staging_dir: s3://devtest-meltano-bucket-01/data/raw01/target-athena/
  env:
    DBT_OUTPUT_SCHEMA_NAME: dbt_dev_melty
    ATHENA_CATALOG: awsdatacatalog
    DBT_TARGET: athena
    DBT_ATHENA_S3_STAGE: s3://devtest-meltano-bucket-01/data/raw01/dbt/
    RAW_SCHEMA_NAME: dev01_melty_raw
    USER_PREFIX: melty
