environments:
- name: prod
  config:
    plugins:
      extractors:
      - name: tap-google-analytics
        config:
          start_date: '2021-11-08'
      - name: tap-athena
        config:
          schema_name: dbt_prod
          s3_staging_dir: s3://prod-meltano-bucket-01/data/raw01/tap-athena/
          s3_bucket: prod-meltano-bucket-01
      loaders:
      - name: target-athena
        config:
          s3_bucket: prod-meltano-bucket-01
          athena_database: prod01_raw
          s3_staging_dir: s3://prod-meltano-bucket-01/data/raw01/target-athena/
      transformers:
      - name: dbt
        config:
          source_schema: prod01_raw
          target_schema: dbt_prod
  env:
    DBT_ATHENA_S3_STAGE: s3://prod-meltano-bucket-01/data/raw01/dbt/
    ATHENA_CATALOG: awsdatacatalog
- name: userdev
  config:
    plugins:
      extractors:
      - name: tap-google-analytics
        config:
          start_date: '2021-11-01'
      - name: tap-athena
        config:
          schema_name: dbt_dev_${USER_PREFIX}
          s3_staging_dir: s3://devtest-meltano-bucket-01/data/raw01/tap-athena/
          s3_bucket: devtest-meltano-bucket-01
      loaders:
      - name: target-athena
        config:
          s3_bucket: devtest-meltano-bucket-01
          athena_database: dev01_${USER_PREFIX}_raw
          s3_staging_dir: s3://devtest-meltano-bucket-01/data/raw01/target-athena/
      transformers:
      - name: dbt
        config:
          source_schema: dev01_${USER_PREFIX}_raw
          target_schema: dbt_dev_${USER_PREFIX}
  env:
    USER_PREFIX: melty
    DBT_ATHENA_S3_STAGE: s3://devtest-meltano-bucket-01/data/raw01/dbt/
    ATHENA_CATALOG: awsdatacatalog