plugins:
  loaders:
  - name: target-yaml
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/target-yaml.git
    config:
      file_naming_scheme: '{stream_name}.yml'
      overwrite_behavior: replace_records
  - name: target-yaml-metrics
    inherit_from: target-yaml
    config:
      file_naming_scheme: metrics.yml
      overwrite_behavior: replace_file
      record_insert_jsonpath: $.metrics
      record_key_property_name: REPO_FULL_NAME
      record_sort_property_name: REPO_FULL_NAME
      default_yaml_template: |
        # This file is auto-generated by running `meltano elt tap-snowflake-metrics target-yaml-metrics`
        metrics: {}
  - name: target-yaml-audit
    inherit_from: target-yaml
    config:
      file_naming_scheme: audit.yml
      overwrite_behavior: replace_file
      record_insert_jsonpath: "$.audit_log"
      record_key_property_name: METRIC_TYPE
      default_yaml_template: |
        # This file is auto-generated by running `meltano elt tap-snowflake-audit target-yaml-audit`
        audit_log: {}
  - name: target-snowflake
    variant: transferwise
    pip_url: pipelinewise-target-snowflake
    config:
      account: epa06486
      file_format: CSV
      add_metadata_columns: true
      password: ${SNOWFLAKE_PASSWORD}
